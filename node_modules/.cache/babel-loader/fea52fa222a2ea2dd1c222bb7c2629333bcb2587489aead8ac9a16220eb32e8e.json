{"ast":null,"code":"import{useEffect}from\"react\";// кастомные хуки всегда должны начинаться с глагола `use`, чтобы реакт понял, что это хук. Он следит за их вызовами\nexport function usePopupClose(isOpen,closePopup){useEffect(function(){if(!isOpen)return;// останавливаем действие эффекта, если попап закрыт\nvar handleOverlay=function handleOverlay(event){// если есть `popup_opened` в классах блока, значит, кликнули на оверлей\nif(event.target.classList.contains(\"popup_opened\")){closePopup();}};var handleEscape=function handleEscape(e){if(e.key===\"Escape\"){closePopup();}};document.addEventListener(\"keydown\",handleEscape);document.addEventListener(\"mousedown\",handleOverlay);//  обязательно удаляем обработчики в `clean-up`- функции\nreturn function(){document.removeEventListener(\"keydown\",handleEscape);document.removeEventListener(\"mousedown\",handleOverlay);};// обязательно следим за `isOpen`, чтобы срабатывало только при открытии, а не при любой перерисовке компонента\n},[isOpen,closePopup]);}","map":{"version":3,"names":["useEffect","usePopupClose","isOpen","closePopup","handleOverlay","event","target","classList","contains","handleEscape","e","key","document","addEventListener","removeEventListener"],"sources":["/Users/ekaterina.vanshet/Desktop/Dev/mesto-react/mesto-react/src/components/hooks/usePopupClose.js"],"sourcesContent":["import { useEffect } from \"react\";\n// кастомные хуки всегда должны начинаться с глагола `use`, чтобы реакт понял, что это хук. Он следит за их вызовами\nexport function usePopupClose(isOpen, closePopup) {\n  useEffect(() => {\n    if (!isOpen) return; // останавливаем действие эффекта, если попап закрыт\n\n    const handleOverlay = (event) => {\n      // если есть `popup_opened` в классах блока, значит, кликнули на оверлей\n      if (event.target.classList.contains(\"popup_opened\")) {\n        closePopup();\n      }\n    };\n\n    const handleEscape = (e) => {\n      if (e.key === \"Escape\") {\n        closePopup();\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleEscape);\n    document.addEventListener(\"mousedown\", handleOverlay);\n\n    //  обязательно удаляем обработчики в `clean-up`- функции\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscape);\n      document.removeEventListener(\"mousedown\", handleOverlay);\n    };\n    // обязательно следим за `isOpen`, чтобы срабатывало только при открытии, а не при любой перерисовке компонента\n  }, [isOpen, closePopup]);\n}\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,OAAO,CACjC;AACA,MAAO,SAAS,CAAAC,aAAaA,CAACC,MAAM,CAAEC,UAAU,CAAE,CAChDH,SAAS,CAAC,UAAM,CACd,GAAI,CAACE,MAAM,CAAE,OAAQ;AAErB,GAAM,CAAAE,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAK,CAAK,CAC/B;AACA,GAAIA,KAAK,CAACC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,CAAE,CACnDL,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAED,GAAM,CAAAM,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,CAAC,CAAK,CAC1B,GAAIA,CAAC,CAACC,GAAG,GAAK,QAAQ,CAAE,CACtBR,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAEDS,QAAQ,CAACC,gBAAgB,CAAC,SAAS,CAAEJ,YAAY,CAAC,CAClDG,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAET,aAAa,CAAC,CAErD;AACA,MAAO,WAAM,CACXQ,QAAQ,CAACE,mBAAmB,CAAC,SAAS,CAAEL,YAAY,CAAC,CACrDG,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEV,aAAa,CAAC,CAC1D,CAAC,CACD;AACF,CAAC,CAAE,CAACF,MAAM,CAAEC,UAAU,CAAC,CAAC,CAC1B"},"metadata":{},"sourceType":"module","externalDependencies":[]}